<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">

  <!-- If for some reason you are using IE, use edge -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <!-- So bootstrap isn't horrible, set the width -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-touch-icon.png">
  <link rel="icon" type="image/png" href="/images/favicons/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/images/favicons/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="/images/favicons/manifest.json">
  <link rel="mask-icon" href="/images/favicons/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="theme-color" content="#ffffff">

  <title>Appendix</title>

  <!-- Reference a CDN so this is properly cached in the browser forever. Unless they clean out the
       Cache this will incur no load time. Ideally we should put a security checksum but that breaks
       Firefox development sometimes -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" crossorigin="anonymous">

  <!-- Asynchronously load the code style sheet because we want everything loaded as fast as possible
       Also tag with ?v=time to bust the cache of any browser so updates appear -->
  <link async rel="stylesheet" href="/css/code-style.css?v='2018-11-28 20:00:31 -0600'">

  <!-- Don't load async because this will make the page render faster, plus the file is small.
       Also do the same cache busting magic here -->
  <link rel="stylesheet" href="/css/main.css?v='2018-11-28 20:00:31 -0600'">

</head>

<body>
<!-- Always shows a header, even in smaller screens. -->
<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">

            <!-- Navigation button as html so we don't have to resize images -->
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>


            <!-- Inline tux for speed -->
            <a id="tuxlink"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAJCAMAAAA4jZ0cAAAAM1BMVEX///8CAgQMDAwsLCw0NDSjbQCkbQC+vbzOkwDU1NTlrADqvADxtgD0vQD12wD+/vz+//yBSdYEAAAAAXRSTlMAQObYZgAAADFJREFUCB0FwQkCQDAQBLCsq6g1/v9aCVQBthUwX8BIgStZCpUvKXSSLs6eyd0Pdg5+JwkBVyC74QYAAAAASUVORK5CYII=" title="Tux" alt="Tux" style="margin-left: 1em; width: 24px; filter: drop-shadow(1px 1px 0 white) drop-shadow(1px -1px 0 white) drop-shadow(-1px 1px 0 white) drop-shadow(-1px -1px 0 white); margin-top: 1em;"/></a>

            <a class="navbar-brand navbar-link normal" href="/">CS 241: System Programming</a>
            <a class="navbar-brand navbar-link small" href="/">CS 241</a>
        </div>

        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            
            <li>
                <a class="navbar-link" href="/assignments.html">Assignments</a>
            </li>
            
            <li>
                <a class="navbar-link" href="/quiz_topics.html">Quizzes</a>
            </li>
            
            <li>
                <a class="navbar-link" href="/help.html">Help!</a>
            </li>
            
            <li>
                <a class="navbar-link" href="/schedule.html">Schedule</a>
            </li>
            
            <li>
                <a class="navbar-link" href="/honors.html">Honors</a>
            </li>
            
            <li>
                <a class="navbar-link" href="/staff.html">The Crew</a>
            </li>
            
            <li>
                <a class="navbar-link" href="/search.html">Search</a>
            </li>
            
            <li>
                <a class="navbar-link" href="/wikibook/home.html">Wikibook</a>
            </li>
            
            <li>
                <a class="navbar-link" href="/wikibook_project/Index.html">Wikibook Project</a>
            </li>
            
          </ul>
        </div>
        </div>
</nav>


<div class="container-fluid">
  <div class="row">
    <div class="col-md-2 col-sm-1 col-xs-0"></div>
    <div class="col-md-8 col-sm-10 col-xs-12">
      <div class="wrapper">
        <div class="pad"><div class="card">
          <div class="title">
            <div class="speaker-wrapper">
              <button onclick="speak()" class="speaker" alt="Read Page"></button>
            </div>
            <h1>
              Appendix

              
            </h1>
          </div>
          <div class="container-fluid"><div class="row"><div class="content col-sm-11 .col-sm-offset-1">
            
            
          </div></div></div>
        </div></div>
      </div>
      
      <div id="content">
          <div class="wrapper">

</div>
          <div class="wrapper">
<ul>
  <li>
<a href="#appendix" class="fancy-link wiki-link">Appendix</a>
    <ul>
      <li>
<a href="#shell" class="fancy-link wiki-link">Shell</a>
        <ul>
          <li><a href="#shell-tricks-and-tips" class="fancy-link wiki-link">Shell tricks and tips</a></li>
          <li><a href="#alright-then-whats-a-terminal" class="fancy-link wiki-link">Alright then what’s a terminal?</a></li>
          <li><a href="#common-utilities" class="fancy-link wiki-link">Common Utilities</a></li>
          <li><a href="#syntactic" class="fancy-link wiki-link">Syntactic</a></li>
          <li><a href="#tips-and-tricks" class="fancy-link wiki-link">Tips and tricks</a></li>
          <li><a href="#what-are-environment-variables" class="fancy-link wiki-link">What are environment variables?</a></li>
        </ul>
      </li>
      <li><a href="#stack-smashing" class="fancy-link wiki-link">Stack Smashing</a></li>
      <li><a href="#assorted-man-pages" class="fancy-link wiki-link">Assorted Man Pages</a></li>
      <li>
<a href="#system-programming-jokes" class="fancy-link wiki-link">System Programming Jokes</a>
        <ul>
          <li><a href="#light-bulb-jokes" class="fancy-link wiki-link">Light bulb jokes</a></li>
          <li><a href="#groaners" class="fancy-link wiki-link">Groaners</a></li>
          <li><a href="#system-programmer-definition" class="fancy-link wiki-link">System Programmer (Definition)</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p>[1][] <span> </span></p>



<div class="pad"><div class="card">
<div class="title"><h2 id="shell" class="title-text">Shell<a class="anchor title-text" href="#shell">#</a>
</h2></div>





















































<div class="container-fluid"><div class="row"><div class="content col-sm-11 .col-sm-offset-1">
<p>A shell is actually how you are going to be interacting with the system. Before user friendly operating systems, when a computer started up all you had access to was a shell. This meant that all of your commands and editing had to be done this way. Nowadays, our computers start up in desktop mode, but one can still access a shell using a terminal.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(Stuff) $
</code></pre></div></div>
<p>It is ready for your next command! You can type in a lot of unix utilities like <code class="highlighter-rouge"><a href="https://linux.die.net/man/1/ls" class="fancy-link">ls</a></code>, <code class="highlighter-rouge">echo Hello</code> and the shell will execute them and give you the result. Some of these are what are known as <code class="highlighter-rouge">shell-builtins</code> meaning that the code is in the shell program itself. Some of these are compiled programs that you run. The shell only looks through a special variable called path which contains a list of <code class="highlighter-rouge">:</code> separated paths to search for an executable with your name, here is an example path.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ echo $PATH
/usr/local/sbin:/usr/local/bin:/usr/sbin:
/usr/bin:/sbin:/bin:/usr/games:/usr/local/games
</code></pre></div></div>
<p>So when the shell executes <code class="highlighter-rouge"><a href="https://linux.die.net/man/1/ls" class="fancy-link">ls</a></code>, it looks through all of those directories, finds <code class="highlighter-rouge">/bin/ls</code> and executes that.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ls
...
$ /bin/ls
</code></pre></div></div>
<p>You can always call through the full path. That is always why in past classes if you want to run something on the terminal you’ve had to do <code class="highlighter-rouge">./exe</code> because typically the directory that you are working in is not in the <code class="highlighter-rouge">PATH</code> variable. The <code class="highlighter-rouge">.</code> expands to your current directory and your shell executes <code class="highlighter-rouge">&lt;current_dir&gt;/exe</code> which is a valid command.</p>
<h3 id="shell-tricks-and-tips" class="title-text">Shell tricks and tips</h3>
<ul>
  <li>
    <p>The up arrow will get you your most recent command</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">ctrl-r</code> will search commands that you previously ran</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">ctrl-c</code> will interrupt your shell’s process</p>
  </li>
  <li>
    <p>Add more!</p>
  </li>
</ul>
<h3 id="alright-then-whats-a-terminal" class="title-text">Alright then what’s a terminal?</h3>
<p>A terminal is just an application that displays the output form the shell. You can have your default terminal, a quake based terminal, terminator, the options are endless!</p>
<h3 id="common-utilities" class="title-text">Common Utilities</h3>
<ol>
  <li>
    <p><span><code class="highlighter-rouge"><a href="https://linux.die.net/man/1/cat" class="fancy-link">cat</a></code></span> concatenate multiple files. It is regularly used to print out the contents of a file to the terminal but the original use was concatenation.</p>

    <div class="highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>$ cat file.txt
...
$ cat shakespeare.txt shakespeare.txt &gt; two_shakes.txt
</code></pre></div>    </div>
  </li>
  <li>
    <p><span><code class="highlighter-rouge"><a href="https://linux.die.net/man/3/diff" class="fancy-link">diff</a></code></span> tells you the difference of the two files. If nothing is printed, then zero is returned meaning the files are the same byte for byte. Otherwise, the longest common subsequence difference is printed</p>

    <div class="highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>$ cat prog.txt
hello
world
$ cat adele.txt
hello
it's me
$ diff prog.txt prog.txt
$ diff shakespeare.txt shakespeare.txt
2c2
&lt; world
---
&gt; it's me
</code></pre></div>    </div>
  </li>
  <li>
    <p><span><code class="highlighter-rouge"><a href="https://linux.die.net/man/1/grep" class="fancy-link">grep</a></code></span> tells you which lines in a file or standard in match a POSIX pattern.</p>

    <div class="highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>$ grep it adele.txt
it's me
</code></pre></div>    </div>
  </li>
  <li>
    <p><span><code class="highlighter-rouge"><a href="https://linux.die.net/man/1/ls" class="fancy-link">ls</a></code></span> tells you which files are in the current directory.</p>
  </li>
  <li>
    <p><span><code class="highlighter-rouge"><a href="https://linux.die.net/man/1/cd" class="fancy-link">cd</a></code></span> this is a shell builtin but it changes to a relative or absolute directory</p>

    <div class="highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>$ cd /usr
$ cd lib/
$ cd -
$ pwd
/usr/
</code></pre></div>    </div>
  </li>
  <li>
    <p><span><code class="highlighter-rouge"><a href="https://linux.die.net/man/1/man" class="fancy-link">man</a></code></span> every system programmers favorite command, tells you more about all your favorite functions!</p>
  </li>
  <li>
    <p><span><code class="highlighter-rouge"><a href="https://linux.die.net/man/3/make" class="fancy-link">make</a></code></span> executes programs according to a makefile.</p>
  </li>
</ol>
<h3 id="syntactic" class="title-text">Syntactic</h3>
<p>Shells have many useful utilities like saving output to a file using redirection <span><code class="highlighter-rouge">&gt;</code></span>. This overwrites the file from the beginning. If you only meant to append to the file, you can use <span><code class="highlighter-rouge">&gt;&gt;</code></span>. Unix also allows file descriptor swapping. This means that you can take the output going to one file descriptor and make it seem like its coming out of another. The most common one is <span><code class="highlighter-rouge">2&gt;&amp;1</code></span> which means take the stderr and make it seem like it is coming out of standard out. This is important because when you use <span><code class="highlighter-rouge">&gt;</code></span> and <span><code class="highlighter-rouge">&gt;&gt;</code></span> they only write the standard output of the file. There are some examples below.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./program &gt; output.txt # To overwrite
$ ./program &gt;&gt; output.txt # To append
$ ./program 2&gt;&amp;1 &gt; output_all.txt # stderr &amp; stdout
$ ./program 2&gt;&amp;1 &gt; /dev/null # don't care about any output
</code></pre></div></div>
<p>The pipe operator has a fascinating history. The UNIX philosophy is writing small programs and chaining them together to do new and interesting things. Back in the early days, hard disk space was limited and write times were slow. Brian Kernighan wanted to maintain the philosophy while also not having to write a bunch of intermediate files that take up hard drive space. So, the UNIX pipe was born. A pipe take the <span><code class="highlighter-rouge"><a href="https://linux.die.net/man/3/stdout" class="fancy-link">stdout</a></code></span> of the program on its left and feeds it to the <span><code class="highlighter-rouge"><a href="https://linux.die.net/man/3/stdin" class="fancy-link">stdin</a></code></span> of the program on its write. Consider the command <span><code class="highlighter-rouge"><a href="https://linux.die.net/man/2/tee" class="fancy-link">tee</a></code></span>. It can be used as a replacement for the redirection operators because tee will both write to a file and output to standard out. It also has the added benefit that it doesn’t need to be the last command in the list. Meaning, that you can write an intermediate result and continue your piping.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./program | tee output.txt # Overwrite
$ ./program | tee -a output.txt # Append
$ head output.txt | wc | head -n 1 # Multi pipes
$ ((head output.txt) | wc) | head -n 1 # Same as above
$ ./program | tee intermediate.txt | wc
</code></pre></div></div>
<p>The <span><code class="highlighter-rouge">&amp;&amp;</code></span> and <span><code class="highlighter-rouge">||</code></span> operator are operators that execute a command sequentially. <span><code class="highlighter-rouge">&amp;&amp;</code></span> only executes a command if the previous command succeeds, and <span><code class="highlighter-rouge">||</code></span> always executes the next command.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ false &amp;&amp; echo "Hello!"
$ true &amp;&amp; echo "Hello!"
$ false || echo "Hello!"
</code></pre></div></div>
<p><span><strong>Shell Tricks</strong></span></p>
<h3 id="tips-and-tricks" class="title-text">Tips and tricks</h3>
<p><span><strong>Shell Tricks</strong></span></p>
<h3 id="what-are-environment-variables" class="title-text">What are environment variables?</h3>
<p>Well each process gets its own dictionary of environment variables that are copied over to the child. Meaning, if the parent changes their environment variables it won’t be transferred to the child and vice versa. This is important in the fork-exec-wait trilogy if you want to exec a program with different environment variables than your parent (or any other process).</p>
<p>For example, you can write a C program that loops through all of the time zones and executes the <span><code class="highlighter-rouge"><a href="https://linux.die.net/man/1/date" class="fancy-link">date</a></code></span> command to print out the date and time in all locals. Environment variables are used for all sorts of programs so modifying them is important.</p>
</div></div></div>
</div></div>
<div class="pad"><div class="card">
<div class="title"><h2 id="stack-smashing" class="title-text">Stack Smashing<a class="anchor title-text" href="#stack-smashing">#</a>
</h2></div>









<div class="container-fluid"><div class="row"><div class="content col-sm-11 .col-sm-offset-1">
<p>Each thread uses a stack memory. The stack ‘grows downwards’ - if a function calls another function, then the stack is extended to smaller memory addresses. Stack memory includes non-static automatic (temporary) variables, parameter values and the return address. If a buffer is too small some data (e.g. input values from the user), then there is a real possibility that other stack variables and even the return address will be overwritten. The precise layout of the stack’s contents and order of the automatic variables is architecture and compiler dependent. However with a little investigative work we can learn how to deliberately smash the stack for a particular architecture.</p>
<p>The example below demonstrates how the return address is stored on the stack. For a particular 32 bit architecture <a href="http://cs-education.github.io/sys/" class="fancy-link wiki-link">Live Linux Machine</a>, we determine that the return address is stored at an address two pointers (8 bytes) above the address of the automatic variable. The code deliberately changes the stack value so that when the input function returns, rather than continuing on inside the main method, it jumps to the exploit function instead.</p>
<div class="language-c highlighter-rouge">
<span class="o">&lt;</span>
</div>
<p>There are <a href="https://en.wikipedia.org/wiki/Stack_buffer_overflow" class="fancy-link wiki-link">a lot</a> of ways that computers tend to get around this.</p>
</div></div></div>
</div></div>
<div class="pad"><div class="card">
<div class="title"><h2 id="assorted-man-pages" class="title-text">Assorted Man Pages<a class="anchor title-text" href="#assorted-man-pages">#</a>
</h2></div>



<div class="container-fluid"><div class="row"><div class="content col-sm-11 .col-sm-offset-1"><p><span><strong>Put in man pages and other discussions</strong></span></p></div></div></div>
</div></div>
<div class="pad"><div class="card">
<div class="title"><h2 id="system-programming-jokes" class="title-text">System Programming Jokes<a class="anchor title-text" href="#system-programming-jokes">#</a>
</h2></div>










































<div class="container-fluid"><div class="row"><div class="content col-sm-11 .col-sm-offset-1">
<p><code class="highlighter-rouge">0x43 0x61 0x74 0xe0 0xf9 0xbf 0x5f 0xff 0x7f 0x00</code></p>
<p>Warning: Authors are not responsible for any neuro-apoptosis caused by these “jokes.” - Groaners are allowed.</p>
<h3 id="light-bulb-jokes" class="title-text">Light bulb jokes</h3>
<p>Q. How many system programmers does it take to change a lightbulb?</p>
<p>A. Just one but they keep changing it until it returns zero.</p>
<p>A. None they prefer an empty socket.</p>
<p>A. Well you start with one but actually it waits for a child to do all of the work.</p>
<h3 id="groaners" class="title-text">Groaners</h3>
<p>Why did the baby system programmer like their new colorful blankie? It was multithreaded.</p>
<p>Why are your programs so fine and soft? I only use 400-thread-count or higher programs.</p>
<p>Where do bad student shell processes go when they die? Forking Hell.</p>
<p>Why are C programmers so messy? They store everything in one big heap.</p>
<h3 id="system-programmer-definition" class="title-text">System Programmer (Definition)</h3>
<p>A system programmer is…</p>
<p>Someone who knows <code class="highlighter-rouge">sleepsort</code> is a bad idea but still dreams of an excuse to use it.</p>
<p>Someone who never lets their code deadlock… but when it does, causes more problems than everyone else combined.</p>
<p>Someone who believes zombies are real.</p>
<p>Someone who doesn’t trust their process to run correctly without testing with the same data, kernel, compiler, RAM, filesystem size,file system format, disk brand, core count, CPU load, weather, magnetic flux, orientation, pixie dust, horoscope sign, wall color, wall gloss and reflectance, motherboard, vibration, illumination, backup battery, time of day, temperature, humidity, lunar position, sun-moon, co-position…</p>
<p>A system program …</p>
<p>Evolves until it can send email.</p>
<p>Evolves until it has the potential to create, connect and kill other programs and consume all possible CPU,memory,network,… resources on all possible devices but chooses not to. Today.</p>
</div></div></div>
</div></div>
</div>
          
          <div class="wrapper">
</div>
      </div>
      <div class="col-md-2 col-sm-1 col-xs-0"></div>
    </div>
  </div>
  <script>
    var github_repo = "illinois-cs241/illinois-cs241.github.io";
    var github_path = "_wikibook_project/Appendix.md";
  </script>
  <!-- Mathjax takes a while to load so do a lazy load to so we can get accessibility -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" crossorigin="anonymous"></script>

<!-- Again bust cache on the main.js file -->
<script src="/js/main.js?v='2018-11-28 20:00:31 -0600'"></script>

<script>
<footer class="">

<div class="container-fluid">
<div class="shadow"></div>

</div>

</footer>

</body>
</html>
